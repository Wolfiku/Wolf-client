<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wolf Client Start</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #000;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        text-align: center;
        overflow: hidden;
    }
    #author {
        position: absolute;
        bottom: 20px;
        width: 100%;
        text-align: center;
        font-weight: bold;
        font-size: 1rem;
        color: #aaa;
    }
    iframe {
        border: none;
        width: 100%;
        height: 100%;
    }
</style>
</head>
<body>
    <div id="loader"></div>
    <div id="author">@wolfikuproduction</div>

<script>
(async function() {
    const importantFile = 'system/systemdata/staylimbo.important';
    const fatalFile = 'system/systemdata/fatalerror.md';
    const loaderFile = 'assets/limbo/loader4.html';

    async function fileExists(url) {
        try {
            const res = await fetch(url, { method: 'HEAD' });
            return res.ok;
        } catch (e) {
            return false;
        }
    }

    const exists = await fileExists(importantFile);

    if (!exists) {
        try {
            const res = await fetch(fatalFile);
            const content = await res.text();
            document.body.innerHTML = '<pre style="white-space: pre-wrap; padding:20px;">' + content + '</pre>';
        } catch (e) {
            document.body.innerHTML = '<p style="color:red;">Fatal error: critical system files missing.</p>';
        }
        return;
    }

    // Show Limbo loader animation
    document.getElementById('loader').innerHTML = `<iframe src="${loaderFile}" sandbox="allow-scripts"></iframe>`;

    // After 3 seconds â†’ go to homescreen
    setTimeout(() => {
        window.location.href = 'homescreen.html';
    }, 3000);
})();
</script>
</body>
</html>
<script>
(async function() {
    const importantFile = 'system/systemdata/staylimbo.important';
    const fatalFile = 'system/systemdata/fatalerror.md';

    async function fileExists(url) {
        try {
            const res = await fetch(url, { method: 'HEAD' });
            return res.ok;
        } catch (e) {
            return false;
        }
    }

    const exists = await fileExists(importantFile);

    if (!exists) {
        try {
            const res = await fetch(fatalFile);
            const content = await res.text();
            document.getElementById('container').innerHTML = '<pre style="white-space: pre-wrap;">' + content + '</pre>';
        } catch (e) {
            document.getElementById('container').innerHTML = '<p style="color:red;">Fatal error: critical system files missing.</p>';
        }
        return;
    }

    const today = new Date().toISOString().split('T')[0];
    const lastShown = localStorage.getItem('splashShown');

    if (lastShown !== today) {
        localStorage.setItem('splashShown', today);
        setTimeout(() => {
            window.location.href = 'homescreen.html';
        }, 2000);
    } else {
        window.location.href = 'homescreen.html';
    }
})();
</script>
</body>
</html>
