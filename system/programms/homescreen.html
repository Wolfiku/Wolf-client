<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wolf Client - Homescreen</title>
  <link rel="stylesheet" href="../../style.css" />
</head>
<body>
  <!-- Hintergrund -->
  <div id="background"></div>

  <!-- Logo -->
  <div class="center">
    <img src="../../assets/wolfclientlogo.png" alt="Wolf Client Logo" class="logo" />
    <input type="text" id="search" placeholder="Search tools..." />
  </div>

  <!-- Buttons -->
  <div class="bottom-left">
    <button id="listBtn">
      <img src="../systemdata/icons/list.png" alt="Tools" />
    </button>
  </div>
  <div class="bottom-right">
    <button id="settingsBtn">
      <img src="../systemdata/icons/settings.png" alt="Settings" />
    </button>
  </div>

  <script>
    // Hintergrundbild laden (aus assets/backgrounds)
    document.getElementById("background").style.backgroundImage =
      "url('../../assets/backgrounds/wolf_client_background_1.png')";

    // Tools laden (aber nicht sofort fatal error werfen)
    let tools = null;
    async function loadTools() {
      try {
        const response = await fetch("../list/tools.json");
        if (!response.ok) throw new Error("missing");
        tools = await response.json();
      } catch (err) {
        tools = null; // nur merken, nicht sofort abbrechen
      }
    }
    loadTools();

    // Event Listener → Fehler nur dann anzeigen, wenn Interaktion stattfindet
    function checkToolsBefore(action) {
      if (!tools || !tools.tools) {
        window.location.href = "../systemdata/fatalerror.md";
      } else {
        action();
      }
    }

    // Suchleiste
    document.getElementById("search").addEventListener("focus", () => {
      checkToolsBefore(() => {
        console.log("Search active");
        // TODO: Search logic einbauen
      });
    });

    // Tool-Liste Button
    document.getElementById("listBtn").addEventListener("click", () => {
      checkToolsBefore(() => {
        console.log("Open tool list");
        // TODO: Tool-Liste einblenden
      });
    });

    // Einstellungen Button
    document.getElementById("settingsBtn").addEventListener("click", () => {
      checkToolsBefore(() => {
        console.log("Open settings");
        // TODO: Settings-Seite öffnen
      });
    });
  </script>
</body>
</html>
